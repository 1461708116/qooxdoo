<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15" />
  <title>qooxdoo demo</title>
  <link type="text/css" rel="stylesheet" href="../demolayout.css"/>
  <script type="text/javascript" src="../demoinclude.js"></script>
</head>
<body>
  <script type="text/javascript" src="../demolayout.js"></script>

  <div id="demoDescription">
    <p>List with colored List Items</p>
  </div>

  <script type="text/javascript">
    
    // first we create a new appearance called colored-list-item and add it to the current
    // appearance theme. This appearance is mainly a copy of the list-item appearance.
    // note the commented difference below in the state function
    //
    QxAppearanceManager.getAppearanceThemeObject().registerAppearance("colored-list-item", 
    {
      setup : function()
      {
        this.bgcolor_selected = new QxColorObject("highlight");
        this.color_selected   = new QxColorObject("highlighttext");
      },
      
      initial : function(vWidget, vTheme)
      {
        return {
          cursor : QxConst.CORE_DEFAULT,
          height : QxConst.CORE_AUTO,
          horizontalChildrenAlign : QxConst.ALIGN_LEFT,
          verticalChildrenAlign : QxConst.ALIGN_MIDDLE,
          spacing : 4,
          paddingTop : 3,
          paddingRight : 5,
          paddingBottom : 3,
          paddingLeft : 5
        };
      },
      
      state : function(vWidget, vTheme, vStates)
      {
        if (vStates.lead)
        {
          vWidget.setStyleProperty("MozOutline", QxConst.FOCUS_OUTLINE);
          vWidget.setStyleProperty("outline", QxConst.FOCUS_OUTLINE);
        }
        else
        {
          vWidget.removeStyleProperty("MozOutline");
          vWidget.removeStyleProperty("outline");
        };
        
        return {
          // in the case vStates.selected is false, the backgroundColor is set to backgroundColorUnselected
          //
          backgroundColor : vStates.selected ? this.bgcolor_selected : vWidget.getBackgroundColorUnselected(),
          color : vStates.selected ? this.color_selected : null
        };
      }  
    });

    // second we create a new class QxColoredListItem which is derived
    // from QxListItem and has an additional property backgroundColorUnselected
    // and a changed appearance to "colored-list-item"
    //
    function QxColoredListItem(vText, vIcon, vValue) {
      QxListItem.call(this, vText, vIcon, vValue);
    };
    
    QxColoredListItem.extend(QxListItem, "QxColoredListItem");
    
    QxColoredListItem.changeProperty({ name : "appearance", type : QxConst.TYPEOF_STRING, defaultValue : "colored-list-item" });
    
    QxColoredListItem.addProperty({ name : "backgroundColorUnselected", type : QxConst.TYPEOF_OBJECT, instance : "QxColor", convert : QxColorCache, allowMultipleArguments : true });



    window.application.main = function()
    {
      var doc = this.getClientWindow().getClientDocument();


      var sourceList = new QxList();
      sourceList.setWidth(200);
      sourceList.setHeight(400);
      sourceList.setLeft(20);
      sourceList.setTop(48);

      // Set horizontal scroll bar to always visible
      sourceList.setOverflow("auto");

      var colors = [ new QxColor("#FFDFDF"), new QxColor("#FEFF9F"), new QxColor("#AAFFFF") ];
      
      // Add items to source list

      for (var i = 1; i <= 10; i++) 
      {
        // now we use the class QxColoredListItem and set the backgroundColorUnselected
        // to alternating colors
        //
        var item = new QxColoredListItem("Item " + i + " is colored.");
        item.setBackgroundColorUnselected(colors[i%3]);
        sourceList.add(item);
      };

      doc.add(sourceList);

   };
  </script>
</body>
</html>
