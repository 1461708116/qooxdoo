<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15" />
  <title>qooxdoo demo</title>
  <link type="text/css" rel="stylesheet" href="../../demo/demolayout.css"/>
  <script type="text/javascript" src="../../demo/demoinclude.js"></script>
 </head>
 <body>
  <script type="text/javascript" src="../../demo/demolayout.js"></script>

  <script type="text/javascript" src="./Definitions.js"></script>
  <script type="text/javascript" src="./QxFrame.js"></script>
  <script type="text/javascript" src="../statusbar_olsson/Definitions.js"></script>
  <script type="text/javascript" src="../statusbar_olsson/QxStatusBar.js"></script>
  <script type="text/javascript" src="../statusbar_olsson/QxStatusBarPane.js"></script>
  <script type="text/javascript" src="../clock_olsson/Definitions.js"></script>
  <script type="text/javascript" src="../clock_olsson/QxClock.js"></script>
  <script type="text/javascript" src="../clock_olsson/QxDigitalClock.js"></script>

  <div id="demoDescription">
    <p>Testing Frame implementation.</p>
    <p>The frame is a decorated window with extended user functionality.</p>
  </div>

  <script type="text/javascript">
    window.application.main = function()
    {
      var doc = this.getClientWindow().getClientDocument();

      var mainF = new QxFrame("Test of frame");
      mainF.setSpace(20, 400, 48, 250);
      mainF.setMenuBar(createMenuBar());
      mainF.setToolBar(createToolBar());
      mainF.setStatusBar(createStatusBar());
      mainF.addEventListener(QxConst.EVENT_TYPE_KEYDOWN, function _onkeydown(e) {
        if(e.getKeyCode() == 90) // The NUM key
        {
          numL.setHtml("NUM");
        }
        else
        {
          numL.setHtml("");
        };
      });

      doc.add(mainF);

      mainF.open();

      function createMenuBar() {
        var menuMB = new QxMenuBar();

        var fileM = new QxMenu();

        var newMB    = new QxMenuButton("New");
        var openMB   = new QxMenuButton("Open");
        var saveAsMB = new QxMenuButton("Save as..");
        var mailS    = new QxMenuSeparator();
        var closeMB  = new QxMenuButton("Close");
        var exitMB   = new QxMenuButton("Exit");
        exitMB.addEventListener("execute", function() {
          mainF.close();
        });

        fileM.add(newMB, openMB, saveAsMB, mailS, closeMB, exitMB);

        var fileMBB = new QxMenuBarButton("File", fileM);

        // Edit Menu
        var editM    = new QxMenu();

        var undoMB        = new QxMenuButton("Undo");
        var redoMB        = new QxMenuButton("Redo");
        var editS1        = new QxMenuSeparator();
        var cutMB         = new QxMenuButton("Cut");
        var copyMB        = new QxMenuButton("Copy");
        var pasteMB       = new QxMenuButton("Paste");
        var deleteMB      = new QxMenuButton("Delete");
        var editS2        = new QxMenuSeparator();
        var selectAllMB   = new QxMenuButton("Select all");
        var editS3        = new QxMenuSeparator();
        var preferencesMB = new QxMenuButton("Preferences");

        editM.add(undoMB, redoMB, editS1, cutMB, copyMB, pasteMB, deleteMB, editS2, selectAllMB, editS3, preferencesMB);

        var editMBB = new QxMenuBarButton("Edit",editM);

        doc.add(fileM, editM);

        menuMB.add(fileMBB, editMBB);

        return menuMB;
      };

      function createToolBar() {
        var toolTB = new QxToolBar();

        var mailTBP = new QxToolBarPart();

        var newTBB = new QxToolBarButton("New","icons/16/file-new.png");

        mailTBP.add(newTBB);

        var firstTBS = new QxToolBarSeparator();

        var editTBP = new QxToolBarPart();

        var copyTBB = new QxToolBarButton("Copy","icons/16/edit-copy.png");

        var cutTBB = new QxToolBarButton("Cut","icons/16/edit-cut.png");

        var pasteTBB = new QxToolBarButton("Paste","icons/16/edit-paste.png");

        editTBP.add(copyTBB, cutTBB, pasteTBB);

        toolTB.add(mailTBP, firstTBS, editTBP);

        return toolTB;
      };

      function createStatusBar() {
        var statusSB = new QxStatusBar();

        var statusL = new QxLabel("Ready");
        var statusSBP1 = new QxStatusBarPane(statusL);
        statusSBP1.setWidth("50%");

        var numL = new QxLabel();
        var statusSBP2 = new QxStatusBarPane(numL);
        statusSBP2.setWidth(30);
        statusSBP2.setLeft(95);

        var digitalClockC = new QxDigitalClock();
        var statusSBP3 = new QxStatusBarPane(digitalClockC);
        statusSBP3.setLeft(98);

        statusSB.add(statusSBP1, statusSBP2, statusSBP3);

        return statusSB;
      };
    };
  </script>
 </body>
</html>
