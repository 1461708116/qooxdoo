{
  "name"    : "testrunner-portable",

  "include" :
  [
    {
      "path" : "testrunner.json"  
    },
    {
      "path" : "${QOOXDOO_PATH}/tool/data/config/application.json",
      "block"   : 
      [ 
        "common",
        "source",
        "source-script",
        "build",
        "build-script",
        "build-resources",
        "build-files",
        "clean" 
      ]
    }
  ],
  
  "default-job" : "source",
  
  "let" :
  {
    "APPLICATION"  : "testrunner",
    "QOOXDOO_PATH" : "../..",
    "API_EXCLUDE"  : ["qx.test.*", "${APPLICATION}.theme.*", "${APPLICATION}.test.*"],
    "LOCALES"      : [ "en" ],
    "CACHE"        : "${TMPDIR}/qx${QOOXDOO_VERSION}/cache",
    "ROOT"         : "."
  },
  
  "config-warnings" :
  {
    "job-shadowing": [
      "build-basic",
      "source",
      "build",
      "source-script",
      "build-script",
      "testrunner::source-script",
      "testrunner::build",
      "testrunner::build-script",
      "testrunner::source",
      "testrunner::build-basic"
    ],
    
    "exclude" : [
      "testrunner.view.widget.*",
      "testrunner.TestLoader",
      "testrunner.TestLoaderInline",
      "testrunner.TestLoaderNative",
      "qx.dev.unit.TestLoaderInline"
    ]
  },
  
  "jobs" :
  {
    
    "source" :
    {
      "let" :
      {
        "TESTRUNNER_ORIGIN" : "external",
        "TESTRUNNER_MAIN_CLASS" : "testrunner.Application",
        "TESTRUNNER_VIEW" : "testrunner.view.Html"
      },
      
      "=run" : [ "source-script" ]
    },
    
    "source-script" :
    {
      "compile-options" :
      {
        "paths" :
        {
          "app-root" : "source",
          "file" : "source/script/testrunner-portable.js",
          "loader-template" : "tool/portable.loader.tmpl.js"
        }
      }
    },
    
    "build-script" :
    {
      "compile-options" :
      {
        "paths" :
        {
          "file" : "${BUILD_PATH}/script/testrunner-portable.js",
          "loader-template" : "tool/portable.loader.tmpl.js"
        }
      },
      
      "=include" :
      [
        "${TESTRUNNER_MAIN_CLASS}",
        "${TESTRUNNER_VIEW}"
      ],
      
      "exclude" :
      [
        "testrunner.view.widget.*",
        "testrunner.TestLoader",
        "testrunner.TestLoaderInline",
        "testrunner.TestLoaderNative",
        "qx.dev.unit.TestLoaderInline"
      ]
    },
    
    "build" :
    {
      "let" :
      {
        "TESTRUNNER_ORIGIN" : "external",
        "TESTRUNNER_MAIN_CLASS" : "testrunner.Application",
        "TESTRUNNER_VIEW" : "testrunner.view.Html"
      },
    
      "=run" : [
        "build-resources",
        "build-script"
      ]
    },
    
    "build-basic-portable-script" :
    {
      "extend" : ["build-basic-script"],
      
      "=include" : [
        "qx.core.BaseInit",
        "${TESTRUNNER_MAIN_CLASS}",
        "${TESTRUNNER_VIEW}"
      ],
      
      "compile-options" :
      {
        "paths" :
        {
          "file" : "${BUILD_PATH}/script/testrunner-portable-basic.js"
        }
      }
    },
    
    "build-basic" :
    {
      "let" :
      {
        "TESTRUNNER_ORIGIN" : "external",
        "TESTRUNNER_MAIN_CLASS" : "testrunner.ApplicationBasic",
        "TESTRUNNER_VIEW" : "testrunner.view.Basic"
      },
      
      "=run" : ["build-basic-portable-script"],
      
      "environment" :
      {
        "testrunner.testOrigin" : "external"
      }
    }
  }
}